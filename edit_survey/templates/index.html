<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <title>Image Aesthetic Assessment</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css"
        integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
    <script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
    <style>
        #overlay {
            display: none;
        }

        @media only screen and (max-width: 5px) {

            /* TODO 1279px */
            #overlay {
                display: block;
                position: fixed;

                top: 0;
                left: 0;
                height: 100%;
                width: 100%;
                height: 100vh;
                width: 100vw;
                margin: 0;

                overflow: auto;
                z-index: 1000;
                overflow: hidden;
                background-color: white;
            }

            body *:not(.mobile) {
                display: none;
            }
        }

        body {
            width: 70%;
            max-width: 1300px;
            margin: 2em auto;
            font: .9em/1.2 Arial, Helvetica, sans-serif;
            display: grid;
            grid-template-columns: 1fr 50px 1fr;
            grid-auto-rows: minmax(100px, auto);
            grid-gap: 30px;
            /* center all the things */
            justify-content: center;
            justify-items: center;
            align-items: center;
            text-align: center;

        }

        form {
            width: 100%;
            height: 100%;
        }

        form>input {
            width: 100%;
            height: auto;
        }

        form>input[type=image] {
            height: 50vh;
            width: auto;
        }

        .headline {
            grid-row: 1;
        }

        .welcome {
            grid-row: 2;
            line-height: 1.5;
            display: inline-block;
            text-align: left;

        }

        .wide {
            grid-column: 1 / -1;
        }

        .left {
            grid-row: 4;
            grid-column: 1;
        }

        .right {
            grid-row: 4;
            grid-column: 3;
        }

        .lower {
            grid-row: 5;
        }

        .datalogging {
            grid-column: 1 / -1;
            grid-row: 6;
            text-align: left;
        }
    </style>

</head>

<body>
    <div id="overlay" class="jumbotron jumbotron-fluid mobile">
        <div class="container mobile" style="width: 100%; height: 100%;">
            <h1 class="display-4 mobile" style="width: 100%;">
                Vielen Dank f√ºr die Teilnahme an meiner Studie</h1>
            <p id="nah" class="lead mobile" style="width: 100%;">
                Leider muss ich dich bitten auf einen Desktopbrowser zu wechseln, oder zumindest ein Ger√§t mit einem
                gro√üen Bildschirm zu verwenden
            </p>
            <img class="mobile" src="https://discordemoji.com/assets/emoji/ppHop.gif" />
            <button type="button" onclick="switchDesktop(this)" class="btn btn-lg btn-info mobile">
                Ok, mach ich!
            </button>
            <img class="mobile" src="https://discordemoji.com/assets/emoji/ppHop.gif" />
            <script>
                function switchDesktop(btn) {
                    btn.innerText = "Danke!";
                    $(btn).removeClass("btn-info");
                    $(btn).addClass("btn-success");
                }
            </script>
        </div>
    </div>
    <h1 class="headline wide">Image Aesthetic Assessment</h1>
    <div class="welcome wide">
        <p>
            Hallo <i>{{ username }}</i>, vielen Dank f√ºr die Teilnahme an meiner Studie!
        </p>
        <p>
            Ich m√∂chte Sie bitten im Folgenden jeweils das Bild anzuklicken, welches Ihnen √§sthetischer erscheint. <br>
            BLA vong wegen, welches professioneller bearbeitet aussieht <br>
            Sie m√ºssen und sollen sich hierbei nicht zu einer Meinung zwingen. <br>
            F√ºr uneindeutige Entscheidungen steht ein extra Button unter den Bildern bereit.
        </p>
        <p>
            Die Datenerhebungserkl√§rung befindet sich am Ende der Seite.
        </p>
        <p>
            Es gibt <i>keine</i> Bearbeitungslimits, weder eine Obergrenze, noch eine Untergrenze.<br>
            Wenden Sie soviel Zeit auf, wie Sie f√ºr diese Studie entbehren k√∂nnen und m√∂chten. <br>
            Sie k√∂nnen auch mehrmals vorbei gucken. Es werden immer neue Bilder bereitstehen üòâ
        </p>
        {% if count != 0 %}<p>Sie haben bereits <b>{{ count }}</b> {% if count == 1 %} Bild{% else %} Bilder {% endif %}
            bearbeitet! Vielen Dank!</b></p>{% endif %}
    </div>

    <form id="left" class="left" action="/poll" method="post">
        <input type="hidden" name="img" value="{{ img }}">
        <input type="hidden" name="parameter" value="{{ parameter }}">
        <input type="hidden" name="leftChanges" value="{{ leftChanges }}">
        <input type="hidden" name="rightChanges" value="{{ rightChanges }}">
        <input type="hidden" name="chosen" value="leftImage">
        <input type="image" src="{{img}}?{{parameter}}={{leftChanges}}&l&hash={{hashval}}">

        <input type="hidden" name="hash" value="{{ hash }}">
        <input type="hidden" name="screenWidth" value="js-disabled?">
        <input type="hidden" name="screenHeight" value="js-disabled?">
        <input type="hidden" name="windowWidth" value="js-disabled?">
        <input type="hidden" name="windowHeight" value="js-disabled?">
        <input type="hidden" name="colorDepth" value="js-disabled?">
    </form>
    <form class="right" action="/poll" method="post">
        <input type="hidden" name="img" value="{{ img }}">
        <input type="hidden" name="parameter" value="{{ parameter }}">
        <input type="hidden" name="leftChanges" value="{{ leftChanges }}">
        <input type="hidden" name="rightChanges" value="{{ rightChanges }}">
        <input type="hidden" name="chosen" value="rightImage">
        <input type="image" src="{{img}}?{{parameter}}={{rightChanges}}&r&hash={{hashval}}">

        <input type="hidden" name="hash" value="{{ hash }}">
        <input type="hidden" name="screenWidth" value="js-disabled?">
        <input type="hidden" name="screenHeight" value="js-disabled?">
        <input type="hidden" name="windowWidth" value="js-disabled?">
        <input type="hidden" name="windowHeight" value="js-disabled?">
        <input type="hidden" name="colorDepth" value="js-disabled?">
    </form>


    <form class="left lower" action="/poll" method="post">
        <input type="hidden" name="img" value="{{ img }}">
        <input type="hidden" name="parameter" value="{{ parameter }}">
        <input type="hidden" name="leftChanges" value="{{ leftChanges }}">
        <input type="hidden" name="rightChanges" value="{{ rightChanges }}">
        <input type="hidden" name="chosen" value="unsure">
        <button type="submit" class="btn btn-outline-secondary btn-lg btn-block">
            ü§∑ bin mir unsicher / kann nicht entscheiden
        </button>

        <input type="hidden" name="hash" value="{{ hash }}">
        <input type="hidden" name="screenWidth" value="js-disabled?">
        <input type="hidden" name="screenHeight" value="js-disabled?">
        <input type="hidden" name="windowWidth" value="js-disabled?">
        <input type="hidden" name="windowHeight" value="js-disabled?">
        <input type="hidden" name="colorDepth" value="js-disabled?">
    </form>
    <form class="right lower" action="/poll" method="post">
        <input type="hidden" name="img" value="{{ img }}">
        <input type="hidden" name="parameter" value="{{ parameter }}">
        <input type="hidden" name="leftChanges" value="{{ leftChanges }}">
        <input type="hidden" name="rightChanges" value="{{ rightChanges }}">
        <input type="hidden" name="chosen" value="error">
        <button id="errorbtn" type="submit" class="btn btn-outline-secondary btn-lg btn-block">
            hier stimmt etwas nicht
        </button>

        <input type="hidden" name="hash" value="{{ hash }}">
        <input type="hidden" name="screenWidth" value="js-disabled?">
        <input type="hidden" name="screenHeight" value="js-disabled?">
        <input type="hidden" name="windowWidth" value="js-disabled?">
        <input type="hidden" name="windowHeight" value="js-disabled?">
        <input type="hidden" name="colorDepth" value="js-disabled?">
    </form>
    <div class="datalogging">
        <h4>Welche Daten werden erhoben und gespeichert?</h4>
        <h5>Essentiell (Kern der Studie und wird weiterverarbeiter):</h5>
        <p>üñºÔ∏è Bilderauswahl und Eingaben (selbstverst√§ndlich)</p>
        <p>üñ•Ô∏è Bildschirmdaten (um sicherzustellen, dass die Bilder korrekt angezeigt werden)</p>
        <p>üåê Browserversion (um Unterschiede zwischen den Betriebssystemen und Browsern zu filtern)</p>
        <h5>Metadaten, welche gespeichert, aber nicht untersucht werden:</h5>
        <p>üîó IP-Adresse</p>
    </div>
    <script>
        $(document).ready(function () {
            $("input[name='screenWidth']").each(function (index, data) {
                $(this).val(window.screen.width);
            });
            $("input[name='screenHeight']").each(function (index, data) {
                $(this).val(window.screen.height);
            });

            $("input[name='windowWidth']").each(function (index, data) {
                $(this).val($(window).width());
            });
            $("input[name='windowHeight']").each(function (index, data) {
                $(this).val($(window).height());
            });

            $("input[name='colorDepth']").each(function (index, data) {
                $(this).val(screen.colorDepth);
            });
        });

        $("#errorbtn").hover(
            function () {
                $(this).removeClass("btn-outline-secondary");
                $(this).addClass("btn-outline-danger");
            },
            function () {
                $(this).removeClass("btn-outline-danger");
                $(this).addClass("btn-outline-secondary");
            }
        );
    </script>
</body>

</html>
